<!DOCTYPE html> <html> <head> <meta charset="UTF-8"> <title>QRã‚¹ã‚­ãƒ£ãƒŠ - RoomBï¼ˆCROSTAFFï¼‰</title> <style> body { font-family: sans-serif; text-align: center; padding: 20px; } #reader { width: 300px; margin: auto; } #result { margin-top: 20px; font-size: 18px; } </style> </head> <body> <h1>QRã‚¹ã‚­ãƒ£ãƒŠ - RoomB</h1> <p>QRã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ãã ã•ã„</p> <div id="reader"></div> <div id="result">ã‚¹ã‚­ãƒ£ãƒ³å¾…æ©Ÿä¸­...</div> <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script> <script> const ROOM_NAME = "RoomB"; const resultDiv = document.getElementById("result"); const reader = new Html5Qrcode("reader"); function sendToWebApp(userId) { const url = `https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec?userId=${encodeURIComponent(userId)}&room=${encodeURIComponent(ROOM_NAME)}`; fetch(url) .then(res => res.text()) .then(response => { resultDiv.innerHTML = `âœ… ç™»éŒ²å®Œäº†: ${userId} @ ${ROOM_NAME}`; }) .catch(err => { resultDiv.innerHTML = `âŒ ã‚¨ãƒ©ãƒ¼: ${err}`; }); } function onScanSuccess(decodedText) { reader.stop(); resultDiv.innerHTML = `ğŸ“· èª­ã¿å–ã‚ŠæˆåŠŸ: ${decodedText}`; sendToWebApp(decodedText); setTimeout(() => { reader.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 }, onScanSuccess); resultDiv.innerHTML = "ã‚¹ã‚­ãƒ£ãƒ³å¾…æ©Ÿä¸­..."; }, 3000); } Html5Qrcode.getCameras().then(devices => { if (devices.length) { reader.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 }, onScanSuccess); } else { resultDiv.innerHTML = "ğŸ“· ã‚«ãƒ¡ãƒ©ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"; } }); </script> </body> </html>